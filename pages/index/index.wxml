<!-- index.wxml -->
<view class="index-container">
  <view class="search-box">
    <view class="search-con" bindtap="goSearch">
      <van-search disabled placeholder="请输入搜索内容"></van-search>
    </view>
    <view class="share-btn-icon-box" bindtap="onShare">
      <image src="../../assets/images/pagesIcon/share.png" class="share-btn-icon" />
    </view>
  </view>
  <view class="ad-swiper">
    <swiper class="swiper" indicator-dots="true" autoplay="true" interval="3000" duration="1000" circular="true">
      <block wx:for="{{ adList }}" wx:key="index">
        <swiper-item>
          <view class="swiper-item {{ item.name }}">
            <image src="{{ item.src }}"></image>
          </view>
        </swiper-item>
      </block>
    </swiper>
  </view>
  <view class="count-box">
    <view wx:for="{{ countData }}" wx:key="index">
      <van-button color="{{ buttonColor['houseStatus'+index] }}" size="small" data-item="{{ item }}" bind:click="getCountTypeList">
        {{ item.count }}
      </van-button>
      <view class="status">{{ item.countName }}</view>
    </view>
  </view>
  <view class="build-box">
    <scroll-view scroll-y lower-threshold="100" bindscrolltolower="scrollToLower" style="height:100%">
      <view class="build-list" wx:for="{{ buildList }}" wx:key="index">
        <view class="build-list-img">
          <image src="{{ item.buildPreview }}" alt=""></image>
          <view class="build-list-status">
            <van-button color="{{ buttonColor['houseStatus'+item.status] }}" size="mini">
              {{ item.statusName }}
            </van-button>
          </view>
        </view>
        <view class="build-list-base">
          <view>{{ item.name }}</view>
          <view>
            <text>套数</text>
            {{ item.houseCount }}套
          </view>
          <view>
            <text>楼栋</text>
            {{ item.buildNo }}
          </view>
        </view>
        <view class="build-list-handle">
          <view wx:if="{{item.status !== 3}}" style="background:#87CEFA" data-item="{{item}}" bindtap="getRemainingList">剩余</view>
          <view style="background:{{ item.payStatus ? '#7FFFD4' : '#B0C4DE' }}" data-item="{{item}}" bindtap="getBuildingList">
            {{ item.payStatus ? '选房' : '预览' }}
          </view>
        </view>
      </view>
      <view style="text-align: center;margin: 10px;">
        <view wx:if="{{ loading }}">加载中...</view>
        <view wx:if="{{ noMore }}">没有更多了</view>
        <view wx:if="{{ loadingFailed }}" bindtap="scrollToLower">数据加载失败,请点击此处重新加载</view>
      </view>
    </scroll-view>
  </view>
  <van-popup show="{{ adShow }}" closeable bind:close="onAdClose" custom-style="height:80%;width:80%;border-radius:10rpx">
    <view class="open-ad-box">
      <van-image width="100%" height="100%" fit="cover" src="https://img.yzcdn.cn/vant/cat.jpeg" />
      <!-- <view class="">
        <text>{{time}}S</text>
        <text class="" selectable="false" space="false" decode="false">跳过</text>
      </view> -->
    </view>
  </van-popup>
  <van-share-sheet show="{{ showShare }}" cancel-text="取消" title="立即分享给好友" options="{{ options }}" bind:select="onSelect" bind:close="onClose" />
  <!-- <van-nav-bar title="我的楼盘" right-text="添加楼盘" safe-area-inset-top="false" bind:click-right="addBuilding" custom-style="padding-top: 0" /> -->
  <!-- <van-grid column-num="3">
    <van-grid-item icon="photo-o" wx:key="index" text="{{ item.name }}" wx:for="{{ myBuildingData }}" data-name='{{ item.name }}' data-buildid='{{ item.buildId }}' bind:click="getBuildingList" />
  </van-grid> -->
</view>
